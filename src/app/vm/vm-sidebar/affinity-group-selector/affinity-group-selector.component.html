<mat-dialog-content>
  <div *loading="!affinityGroups || loading">
    <form [formGroup]="affinityGroupForm" (ngSubmit)="createGroup()">
      <mat-form-field>
        <input
          matInput
          type="text"
          formControlName="name"
          [placeholder]="'AFFINITY_GROUP.NAME' | translate"
        >
        <mat-error *ngIf="affinityGroupForm.controls['name'].hasError('nameIsTaken')">
          {{ 'VM_PAGE.VM_CREATION.THIS_NAME_IS_TAKEN' | translate }}
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-select class="type" formControlName="type">
          <mat-option *ngFor="let type of types" [value]="type">
            {{ AffinityGroupTypesMap[type] }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field>
        <input
          matInput
          type="text"
          formControlName="description"
          [placeholder]="'AFFINITY_GROUP.DESCRIPTION' | translate"
        >
      </mat-form-field>
      <button
        mat-icon-button
        class="add-rule-button"
        [disabled]="affinityGroupForm.invalid"
      >
        <mat-icon class="mdi-plus"></mat-icon>
      </button>
    </form>

    <cs-affinity-group-list
      [affinityGroups]="list"
      [isVmCreation]="isVmCreation"
      (selectedGroupChange)="changeGroup($event)"
    ></cs-affinity-group-list>
  </div>

</mat-dialog-content>
<div class="mat-dialog-actions">
  <button
    mat-button
    type="button"
    color="primary"
    (click)="onCancel.emit()"
  >
    {{ 'COMMON.CANCEL' | translate }}
  </button>
  <button
    mat-button
    type="button"
    color="primary"
    [disabled]="!selectedGroup"
    (click)="submit()"
  >
    {{ 'COMMON.SELECT' | translate }}
  </button>
</div>
